query getCart($checkoutId: ID!) {
  node(id: $checkoutId) {
    ... on Checkout {
      __typename
      webUrl
      id
      completedAt
      subtotalPriceV2 {
        amount
        currencyCode
      }
      totalTaxV2 {
        amount
        currencyCode
      }
      totalPriceV2 {
        amount
        currencyCode
      }
      lineItems(first: 250) {
        nodes {
          id
          title
          quantity
          variant {
            id
            title
            product {
              handle
            }
            priceV2 {
              amount
              currencyCode
            }
            image {
              altText
              url(
                transform: {
                  preferredContentType: JPG
                  crop: CENTER
                  maxWidth: 768
                  maxHeight: 1024
                }
              )
            }
          }
        }
      }
    }
  }
}

query getCartUsingCartApi($cartId: ID!) {
  cart(id: $cartId) {
    __typename
    id
    createdAt
    updatedAt
    checkoutUrl
    lines(first: 250) {
      edges {
        node {
          id
          quantity
          merchandise {
            ... on ProductVariant {
              id
              title
              product {
                handle
                title
              }
              priceV2 {
                amount
                currencyCode
              }
              image {
                altText
                url(
                  transform: {
                    preferredContentType: JPG
                    crop: CENTER
                    maxWidth: 768
                    maxHeight: 1024
                  }
                )
              }
            }
          }
        }
      }
    }
  }
}

query getCartItemCount($checkoutId: ID!) {
  node(id: $checkoutId) {
    ... on Checkout {
      __typename
      lineItems(first: 250) {
        edges {
          node {
            quantity
          }
        }
      }
    }
  }
}

query getCartItemCountUsingCartApi($cartId: ID!) {
  cart(id: $cartId) {
    __typename
    totalQuantity
  }
}

mutation createCart($input: CheckoutCreateInput!) {
  checkoutCreate(input: $input) {
    checkout {
      id
      webUrl
    }
  }
}

mutation createCartUsingCartApi($input: CartInput!) {
  cartCreate(input: $input) {
    cart {
      id
      checkoutUrl
      createdAt
      updatedAt
    }
  }
}

mutation addCartItem($checkoutId: ID!, $lineItem: CheckoutLineItemInput!) {
  checkoutLineItemsAdd(checkoutId: $checkoutId, lineItems: [$lineItem]) {
    checkout {
      webUrl
      id
    }
  }
}

mutation addCartItemUsingCartApi($cartId: ID!, $lineItem: CartLineInput!) {
  cartLinesAdd(cartId: $cartId, lines: [$lineItem]) {
    cart {
      id
      lines(first: 250) {
        edges {
          node {
            id
            quantity
          }
        }
      }
    }
  }
}

mutation updateCartItem(
  $checkoutId: ID!
  $lineItem: CheckoutLineItemUpdateInput!
) {
  checkoutLineItemsUpdate(checkoutId: $checkoutId, lineItems: [$lineItem]) {
    checkout {
      id
      lineItems(first: 250) {
        edges {
          node {
            quantity
          }
        }
      }
    }
  }
}

mutation updateCartItemUsingCartApi(
  $cartId: ID!
  $lines: [CartLineUpdateInput!]!
) {
  cartLinesUpdate(cartId: $cartId, lines: $lines) {
    cart {
      id
      checkoutUrl
      lines(first: 10) {
        edges {
          node {
            id
            quantity
            merchandise {
              ... on ProductVariant {
                id
                title
              }
            }
          }
        }
      }
    }
  }
}

mutation removeCartItem($checkoutId: ID!, $lineItemId: ID!) {
  checkoutLineItemsRemove(checkoutId: $checkoutId, lineItemIds: [$lineItemId]) {
    checkout {
      id
    }
  }
}

mutation removeCartItemUsingCartApi($cartId: ID!, $lineItemId: ID!) {
  cartLinesRemove(cartId: $cartId, lineIds: [$lineItemId]) {
    cart {
      id
    }
  }
}
